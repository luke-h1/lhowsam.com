import{__getNamedExports as U}from"../../../__next-on-pages-dist__/webpack/21aab4328bb5a8a6606fed09aa828074.js";import{__getNamedExports as D}from"../../../__next-on-pages-dist__/webpack/69b612c45855c2996573d1ade0e719da.js";import{__getNamedExports as B}from"../../../__next-on-pages-dist__/webpack/458df1c67ea8bc44e305a0ee9813f1bf.js";import{__getNamedExports as X}from"../../../__next-on-pages-dist__/webpack/b6b43b62215054e30036591992fe3f61.js";import{__getNamedExports as H}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var l=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/now-playing"),$=U(l,l,l),G=$.__chunk_26195,q=$.__chunk_2067,z=$.__chunk_52174,J=$.__chunk_90080,W=$.__chunk_25014,f=D(l,l,l),Y=f.__chunk_37507,Q=f.__chunk_33676,V=f.__chunk_76369,Z=f.__chunk_17385,ee=f.__chunk_14575,te=f.__chunk_75303,ne=f.__chunk_74758,_e=f.__chunk_55254,oe=f.__chunk_5164,re=f.__chunk_3764,ae=f.__chunk_48875,se=f.__chunk_33492,ce=f.__chunk_16826,ue=f.__chunk_27931,ie=f.__chunk_18071,pe=f.__chunk_44630,j=B(l,l,l),ge=j.__chunk_39820,he=j.__chunk_61646,le=j.__chunk_79072,ke=j.__chunk_66160,de=j.__chunk_2795,fe=j.__chunk_30940,u=X(l,l,l),me=u.__chunk_63238,xe=u.__chunk_10114,ye=u.__chunk_52136,be=u.__chunk_25376,we=u.__chunk_5376,Ee=u.__chunk_4205,Ne=u.__chunk_82516,ve=u.__chunk_30000,Pe=u.__chunk_8546,Re=u.__chunk_94563,Oe=u.__chunk_60056,Te=u.__chunk_90221,je=u.__chunk_33857,$e=u.__chunk_79560,Ce=u.__chunk_20326,Ae=u.__chunk_52698,Ie=u.__chunk_77501,Se=u.__chunk_42801,Fe=u.__chunk_29496,Me=u.__chunk_88326,Le=u.__chunk_61229,A=H(l,l,l),Ke=A.__NEXT_FONT_MANIFEST,Ue=A.__REACT_LOADABLE_MANIFEST,ze=((m,O,De)=>(O._ENTRIES={},m.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a510cedade41b605.js","static/chunks/47a7421e-583813ad5fe8de9c.js","static/chunks/1991-97570a485f05e016.js","static/chunks/main-app-c71a0a090d1fd7bf.js"],pages:{"/_app":["static/chunks/webpack-a510cedade41b605.js","static/chunks/framework-20afca218c33ed8b.js","static/chunks/main-8e4f8b391b7291e4.js","static/chunks/pages/_app-571f5a309f18098e.js"],"/_error":["static/chunks/webpack-a510cedade41b605.js","static/chunks/framework-20afca218c33ed8b.js","static/chunks/main-8e4f8b391b7291e4.js","static/chunks/pages/_error-0c83b65e598e9e22.js"]},ampFirstPages:[]},m.__BUILD_MANIFEST.lowPriorityFiles=["/static/ij-0bAXCufHaPA8MLhukD/_buildManifest.js",,"/static/ij-0bAXCufHaPA8MLhukD/_ssgManifest.js"],m.__REACT_LOADABLE_MANIFEST=Ue,m.__NEXT_FONT_MANIFEST=Ke,m.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var y={},N={};function _(e){var a=N[e];if(a!==void 0)return a.exports;var n=N[e]={id:e,loaded:!1,exports:{}},c=!0;try{y[e].call(n.exports,n,n.exports,_),c=!1}finally{c&&delete N[e]}return n.loaded=!0,n.exports}_.m=y,_.amdO={},(()=>{var e=[];_.O=(a,n,c,p)=>{if(n){p=p||0;for(var s=e.length;s>0&&e[s-1][2]>p;s--)e[s]=e[s-1];e[s]=[n,c,p];return}for(var g=1/0,s=0;s<e.length;s++){for(var[n,c,p]=e[s],h=!0,x=0;x<n.length;x++)g>=p&&Object.keys(_.O).every(b=>_.O[b](n[x]))?n.splice(x--,1):(h=!1,p<g&&(g=p));if(h){e.splice(s--,1);var d=c();d!==void 0&&(a=d)}}return a}})(),_.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return _.d(a,{a}),a},(()=>{var e,a=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__;_.t=function(n,c){if(1&c&&(n=this(n)),8&c||typeof n=="object"&&n&&(4&c&&n.__esModule||16&c&&typeof n.then=="function"))return n;var p=Object.create(null);_.r(p);var s={};e=e||[null,a({}),a([]),a(a)];for(var g=2&c&&n;typeof g=="object"&&!~e.indexOf(g);g=a(g))Object.getOwnPropertyNames(g).forEach(h=>s[h]=()=>n[h]);return s.default=()=>n,_.d(p,s),p}})(),_.d=(e,a)=>{for(var n in a)_.o(a,n)&&!_.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},_.e=()=>Promise.resolve(),_.g=function(){if(typeof O=="object")return O;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),_.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),_.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},_.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={993:0};_.O.j=c=>e[c]===0;var a=(c,p)=>{var s,g,[h,x,d]=p,t=0;if(h.some(o=>e[o]!==0)){for(s in x)_.o(x,s)&&(_.m[s]=x[s]);if(d)var i=d(_)}for(c&&c(p);t<h.length;t++)g=h[t],_.o(e,g)&&e[g]&&e[g][0](),e[g]=0;return _.O(i)},n=m.webpackChunk_N_E=m.webpackChunk_N_E||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))})(),_.nc=void 0})(),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[313],{61229:Le,88326:Me,29496:Fe,42801:Se,77501:Ie,52698:Ae,20326:Ce,79560:$e,33857:je,90221:Te,60056:Oe,94563:Re,8546:Pe,3e4:ve,82516:Ne,4205:Ee,5376:we,25376:be,52136:ye,25014:W,90080:J,10114:xe,52174:z,63238:me}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[212],{30940:fe,2795:de,66160:ke,79072:le,61646:he,39820:ge}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[686],{44630:pe,18071:ie,27931:ue,16826:ce,33492:se,48875:ae,3764:re,5164:oe,55254:_e,74758:ne,75303:te,14575:ee,17385:Z,76369:V,33676:Q,37507:Y}]),(m.webpackChunk_N_E=m.webpackChunk_N_E||[]).push([[360],{2067:q,26195:G,14939:(y,N,_)=>{"use strict";_.r(N),_.d(N,{ComponentMod:()=>I,default:()=>S});var e={};_.r(e),_.d(e,{GET:()=>b,revalidate:()=>r,runtime:()=>o});var a={};_.r(a),_.d(a,{originalPathname:()=>E,patchFetch:()=>C,requestAsyncStorage:()=>v,routeModule:()=>k,serverHooks:()=>w,staticGenerationAsyncStorage:()=>P});var n=_(75303),c=_(55254),p=_(3e4),s=_(82516);let g=process.env.SPOTIFY_CLIENT_ID,h=process.env.SPOTIFY_CLIENT_SECRET,x=process.env.SPOTIFY_REFRESH_TOKEN,d=btoa(`${g}:${h}`),t=()=>"",i={getAccessToken:async()=>(await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${d}`,"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:x})})).json(),async getNowPlaying(){let{access_token:R}=await i.getAccessToken();return fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${R}`}})},async getTopTracks(){let{access_token:R}=await i.getAccessToken();return fetch("https://api.spotify.com/v1/me/top/tracks",{headers:{Authorization:`Bearer ${R}`}})},nextNowPlaying:async()=>(await fetch(`${window.location.origin}/api/now-playing`)).json(),async lambdaNowPlaying(){let R=t();return(await fetch("https://nowplaying-staging.lhowsam.com/api/now-playing",{headers:{"Content-Type":"application/json","x-consumer":R}})).json()}},o="edge",r=9;async function b(){let R=await i.getNowPlaying();if(R.status===204||R.status>400)return new Response(JSON.stringify({isPlaying:!1}),{status:200});let T=await R.json();if(!T.item)return new Response(JSON.stringify({isPlaying:!1}),{status:200});let F=T.is_playing,M=T.item.name,L=T.item.artists.map(K=>K.name).join(", ");return new Response(JSON.stringify({album:T.item.album.name,albumImageUrl:T.item.album.images[0].url,artist:L,isPlaying:F,songUrl:T.item.external_urls.spotify,title:M}),{status:200})}let k=new c.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/now-playing/route",pathname:"/api/now-playing",filename:"route",bundlePath:"app/api/now-playing/route"},resolvedPagePath:"/Users/lukehowsam/srv/dev/lhowsam.com/src/app/api/now-playing/route.ts",nextConfigOutput:"",userland:e}),{requestAsyncStorage:v,staticGenerationAsyncStorage:P,serverHooks:w}=k,E="/api/now-playing/route";function C(){return(0,s.XH)({serverHooks:w,staticGenerationAsyncStorage:P})}let I=a,S=n.a.wrap(k)}},y=>{var N=e=>y(y.s=e);y.O(0,[313,212,686],()=>N(14939));var _=y.O();(O._ENTRIES=typeof O._ENTRIES>"u"?{}:O._ENTRIES)["middleware_app/api/now-playing/route"]=_}]),function(){let y={exports:{},loaded:!1};return function(_,e){var a=Object.defineProperty,n=t=>a(t,"__esModule",{value:!0}),c=(t,i)=>{n(t);for(var o in i)a(t,o,{get:i[o],enumerable:!0})};c(e,{default:()=>g});function p(t){let i={};return t&&t.forEach((o,r)=>{i[r]=o,r.toLowerCase()==="set-cookie"&&(i[r]=s(o))}),i}function s(t){let i=[],o=0,r,b,k,v,P;function w(){for(;o<t.length&&/\s/.test(t.charAt(o));)o+=1;return o<t.length}function E(){return b=t.charAt(o),b!=="="&&b!==";"&&b!==","}for(;o<t.length;){for(r=o,P=!1;w();)if(b=t.charAt(o),b===","){for(k=o,o+=1,w(),v=o;o<t.length&&E();)o+=1;o<t.length&&t.charAt(o)==="="?(P=!0,o=v,i.push(t.substring(r,k)),r=o):o=k+1}else o+=1;(!P||o>=t.length)&&i.push(t.substring(r,t.length))}return i}function g(t){let i=t.staticRoutes.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page})),o=t.dynamicRoutes?.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page}))||[];return async function(r,b){let k=new URL(r.url).pathname,v={};if(t.nextConfig?.basePath&&k.startsWith(t.nextConfig.basePath)&&(k=k.replace(t.nextConfig.basePath,"")||"/"),t.nextConfig?.i18n)for(let w of t.nextConfig.i18n.locales){let E=new RegExp(`^/${w}($|/)`,"i");if(k.match(E)){k=k.replace(E,"/")||"/";break}}for(let w of i)if(w.regexp.exec(k)){v.name=w.page;break}if(!v.name){let w=x(k);for(let E of o||[]){if(w&&!x(E.page))continue;let C=E.regexp.exec(k);if(C){v={name:E.page,params:C.groups};break}}}let P=await O._ENTRIES[`middleware_${t.name}`].default.call({},{request:{url:r.url,method:r.method,headers:p(r.headers),ip:h(r.headers,d.Ip),geo:{city:h(r.headers,d.City,!0),country:h(r.headers,d.Country,!0),latitude:h(r.headers,d.Latitude),longitude:h(r.headers,d.Longitude),region:h(r.headers,d.Region,!0)},nextConfig:t.nextConfig,page:v,body:r.body}});return b.waitUntil(P.waitUntil),P.response}}function h(t,i,o=!1){let r=t.get(i)||void 0;return o&&r?decodeURIComponent(r):r}function x(t){return t==="/api"||t.startsWith("/api/")}var d;(function(t){t.City="x-vercel-ip-city",t.Country="x-vercel-ip-country",t.Ip="x-real-ip",t.Latitude="x-vercel-ip-latitude",t.Longitude="x-vercel-ip-longitude",t.Region="x-vercel-ip-country-region"})(d||(d={}))}(y,y.exports),y.exports}.call({}).default({name:"app/api/now-playing/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/blog",regex:"^/blog(?:/)?$",routeKeys:{},namedRegex:"^/blog(?:/)?$"},{page:"/feed.xml",regex:"^/feed\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/feed\\.xml(?:/)?$"},{page:"/projects",regex:"^/projects(?:/)?$",routeKeys:{},namedRegex:"^/projects(?:/)?$"},{page:"/robots.txt",regex:"^/robots\\.txt(?:/)?$",routeKeys:{},namedRegex:"^/robots\\.txt(?:/)?$"},{page:"/sitemap.xml",regex:"^/sitemap\\.xml(?:/)?$",routeKeys:{},namedRegex:"^/sitemap\\.xml(?:/)?$"},{page:"/talks",regex:"^/talks(?:/)?$",routeKeys:{},namedRegex:"^/talks(?:/)?$"},{page:"/work",regex:"^/work(?:/)?$",routeKeys:{},namedRegex:"^/work(?:/)?$"}],dynamicRoutes:[{page:"/blog/tags/[slug]",regex:"^/blog/tags/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/blog/tags/(?<nxtPslug>[^/]+?)(?:/)?$"},{page:"/blog/[slug]",regex:"^/blog/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/blog/(?<nxtPslug>[^/]+?)(?:/)?$"},{page:"/projects/[slug]",regex:"^/projects/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/projects/(?<nxtPslug>[^/]+?)(?:/)?$"},{page:"/studio/[[...index]]",regex:"^/studio(?:/(.+?))?(?:/)?$",routeKeys:{nxtPindex:"nxtPindex"},namedRegex:"^/studio(?:/(?<nxtPindex>.+?))?(?:/)?$"},{page:"/work/[slug]",regex:"^/work/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/work/(?<nxtPslug>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(l,l,l);export{ze as default};
